<html>
    <head>
        <title>Hello ServantJS</title>
    </head>
    <body>
        <h1>Hello ServantJS</h1>
        <ul id="habits"></ul>

        <script src="api.js" type="text/javascript"></script>
        <script type="text/javascript">

            window.addEventListener('load', function() {
            // we get the current value stored by the server when the page is loaded
                getHabits(updateHabits, alert);
            });

            function updateHabits(response) {
                document.getElementById('habits').innerHTML = "";
                response.forEach(addHabitNameToList);
            }

            function addHabitNameToList(habit) {
                var list = document.getElementById('habits');
                var entry = document.createElement('li');
                entry.appendChild(document.createTextNode(habit["habitName"]));
                list.appendChild(entry);
            }

            function addHabit(name) {
                postHabits({"habitName": name, "habitId": 999, "habitChain": []}, updateHabits, alert)
            }
        </script>
    </body>
</html>
